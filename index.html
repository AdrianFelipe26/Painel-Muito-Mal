<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel Hotel do Muito Mal</title>
<style>
  body {
    background-color: #1b0d2b;
    color: #f0d7ff;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }

  @keyframes fundoPisca {
    0% { background-color: #1b0d2b; }
    50% { background-color: #2e0f44; }
    100% { background-color: #1b0d2b; }
  }
  body { animation: fundoPisca 6s infinite; }

  #painel {
    background-color: #2c143f;
    border: 4px solid #7a2fff;
    border-radius: 20px;
    padding: 30px;
    width: 350px;
    text-align: center;
    box-shadow: 0 0 20px #7a2fff;
    transition: box-shadow 0.3s;
  }

  #painel.brilho {
    box-shadow: 0 0 40px #d5aaff;
  }

  h1 {
    margin-bottom: 20px;
    font-size: 1.4rem;
    color: #d5aaff;
    text-shadow: 0 0 5px #fff, 0 0 10px #7a2fff;
  }

  button {
    background-color: #7a2fff;
    color: #fff;
    border: none;
    padding: 12px 18px;
    margin: 10px 5px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    font-size: 1rem;
    transition: 0.3s;
    box-shadow: 0 0 10px #7a2fff;
  }

  button:hover {
    background-color: #9f5fff;
    box-shadow: 0 0 20px #d5aaff;
  }

  input {
    width: 80%;
    padding: 10px;
    border-radius: 8px;
    border: 2px solid #7a2fff;
    margin-top: 10px;
    background-color: #3b1f55;
    color: #fff;
    font-weight: bold;
    font-size: 1rem;
    text-align: center;
  }

  #mensagem {
    margin-top: 20px;
    font-weight: bold;
    font-size: 1rem;
    color: #ffdf00;
    text-shadow: 0 0 5px #fff, 0 0 10px #ffdf00;
  }

  .blink {
    animation: blinkText 0.7s steps(1) infinite;
  }

  @keyframes blinkText {
    50% { opacity: 0; }
  }

  #historico {
    margin-top: 20px;
    background-color: #3b1f55;
    padding: 10px;
    border-radius: 8px;
    max-height: 120px;
    overflow-y: auto;
    font-size: 0.9rem;
    text-align: left;
    display: none; /* Inicialmente oculto */
  }

  /* estilo e anima√ß√£o para censura (entrada padr√£o) */
  .censored {
    display:inline-block;
    background:#000;
    color:transparent;
    padding:2px 8px;
    border-radius:4px;
    box-shadow: inset 0 0 0 2px rgba(0,0,0,0.6);
    animation: censorFlash 0.9s steps(2, end) infinite;
    font-weight:700;
    letter-spacing:1px;
  }
  @keyframes censorFlash {
    0% { background:#000; opacity:1; transform:translateY(0); }
    40% { background:#0b0b0b; opacity:0.8; transform:translateY(-1px); }
    80% { background:#000; opacity:1; transform:translateY(0); }
    100% { background:#000; opacity:1; transform:translateY(0); }
  }

  ul#listaHistorico { padding-left: 16px; margin:6px 0 0 0; }
  ul#listaHistorico li { margin-bottom:6px; }
</style>
</head>
<body>

<div id="painel">
  <h1>Painel do Hotel do Muito Mal, Muito Muito Muito Mal, Muito Muito Muito Muito Muito Mal.</h1>
  <div id="modos">
    <button id="modoClienteBtn">Modo Cliente</button>
    <button id="modoAdminBtn">Modo Administrador</button>
  </div>

  <div id="cliente" style="display:none;">
    <p>Digite o nome do seu quarto:</p>
    <input type="text" id="nomeQuarto" placeholder="Qual seu quarto?">
    <button id="desbloquearQuarto">Desbloquear</button>
  </div>

  <div id="admin" style="display:none;">
    <p>Digite a senha de administrador:</p>
    <input type="password" id="senhaAdmin" placeholder="Senha">
    <button id="entrarAdmin">Entrar</button>

    <div id="desbloqueioAdmin" style="display:none; margin-top:10px;">
      <p>Digite o quarto que deseja desbloquear:</p>
      <input type="text" id="quartoAdmin" placeholder="Qual seu quarto?">
      <button id="desbloquearQuartoAdmin">Desbloquear Quarto</button>
    </div>
  </div>

  <div id="mensagem"></div>
  <div id="historico">
    <strong>Hist√≥rico Recente de Portas Abertas:</strong>
    <ul id="listaHistorico"></ul>
  </div>
</div>

<audio id="somDesbloqueio" src="desbloqueio.mp3"></audio>
<audio id="somErro" src="erro.mp3"></audio>

<script>
const modoClienteBtn = document.getElementById('modoClienteBtn');
const modoAdminBtn = document.getElementById('modoAdminBtn');
const cliente = document.getElementById('cliente');
const admin = document.getElementById('admin');
const desbloqueioAdminDiv = document.getElementById('desbloqueioAdmin');
const mensagem = document.getElementById('mensagem');
const listaHistorico = document.getElementById('listaHistorico');
const historicoDiv = document.getElementById('historico');
const somDesbloqueio = document.getElementById('somDesbloqueio');
const somErro = document.getElementById('somErro');
const painel = document.getElementById('painel');

/// MUDAN√áA PRINCIPAL: hist√≥rico inicial j√° com entrada censurada + SOL22
// observa√ß√£o: a entrada censurada √© representada pelo token '__CENSORED__' e renderizada de forma especial
let historico = ['__CENSORED__', 'Quarto SOL 22 aberto']; // Hist√≥rico inicial (censurado + SOL22)

// mapa de nomes normalizados -> exibi√ß√£o
const roomsMap = {
  'lua13': 'Lua 13',
  'sol22': 'SOL 22',
  'castelo19': 'Castelo 19'
};

function normalizeRoom(s){
  // remove espa√ßos, acentos? (manter apenas alfanum√©ricos), minusculas
  if(!s) return '';
  // remove acentos
  const semAcento = s.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
  // keep letters+numbers only, lowercase, remove spaces/hyphens/others
  return semAcento.toLowerCase().replace(/[^a-z0-9]/g,'');
}

function atualizarHistorico() {
  listaHistorico.innerHTML = '';
  historico.slice(-20).forEach(item => {
    const li = document.createElement('li');
    if(item === '__CENSORED__'){
      // renderiza entrada censurada animada
      li.innerHTML = 'A porta <span class="censored">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span> foi desbloqueada.';
    } else {
      li.textContent = item;
    }
    listaHistorico.appendChild(li);
  });
}
atualizarHistorico();

modoClienteBtn.addEventListener('click', () => {
  cliente.style.display = 'block';
  admin.style.display = 'none';
  desbloqueioAdminDiv.style.display = 'none';
  mensagem.textContent = '';
  historicoDiv.style.display = 'none';
});

modoAdminBtn.addEventListener('click', () => {
  admin.style.display = 'block';
  cliente.style.display = 'none';
  mensagem.textContent = '';
  historicoDiv.style.display = 'none';
});

document.getElementById('desbloquearQuarto').addEventListener('click', () => {
  const quartoRaw = document.getElementById('nomeQuarto').value.trim();
  if (!quartoRaw) {
    mensagem.textContent = 'Por favor, digite um quarto.';
    somErro.play();
    return;
  }

  const key = normalizeRoom(quartoRaw);

  if (roomsMap[key]) {
    const displayName = roomsMap[key];
    mensagem.textContent = `‚ú® A porta do quarto ${displayName} foi desbloqueada! ‚ú®`;
    mensagem.classList.add('blink');
    painel.classList.add('brilho');
    somDesbloqueio.play();
    historico.push(`Cliente desbloqueou: ${displayName}`);
    atualizarHistorico();
    // limpa input e anima√ß√£o
    setTimeout(() => { mensagem.classList.remove('blink'); painel.classList.remove('brilho'); }, 1500);
    document.getElementById('nomeQuarto').value = '';
  } else {
    mensagem.textContent = `‚ö† Quarto "${quartoRaw}" n√£o encontrado.`;
    somErro.play();
  }
});

document.getElementById('entrarAdmin').addEventListener('click', () => {
  const senha = document.getElementById('senhaAdmin').value.trim();
  if (senha === '135') {
    mensagem.textContent = 'üîì Modo administrador ativado!';
    historicoDiv.style.display = 'block';
    desbloqueioAdminDiv.style.display = 'block';
    painel.classList.add('brilho');
    somDesbloqueio.play();
    atualizarHistorico();
    // limpa campo senha
    document.getElementById('senhaAdmin').value = '';
  } else {
    mensagem.textContent = '‚ùå Senha incorreta.';
    somErro.play();
  }
});

// admin desbloqueio: agora verifica as mesmas portas v√°lidas (case/space-insensitive)
document.getElementById('desbloquearQuartoAdmin').addEventListener('click', () => {
  const quartoRaw = document.getElementById('quartoAdmin').value.trim();
  if (!quartoRaw) {
    mensagem.textContent = 'Por favor, digite um quarto.';
    somErro.play();
    return;
  }

  const key = normalizeRoom(quartoRaw);

  if (roomsMap[key]) {
    const displayName = roomsMap[key];
    mensagem.textContent = `‚ú® Porta do quarto ${displayName} desbloqueada pelo administrador!`;
    mensagem.classList.add('blink');
    painel.classList.add('brilho');
    somDesbloqueio.play();
    historico.push(`Administrador desbloqueou: ${displayName}`);
    atualizarHistorico();
    setTimeout(() => { mensagem.classList.remove('blink'); painel.classList.remove('brilho'); }, 1500);
    document.getElementById('quartoAdmin').value = '';
  } else {
    // se n√£o for uma das portas mapeadas, mantemos comportamento anterior: ainda permite desbloquear qualquer texto?
    // voc√™ pediu que CASTELO19, SOL22 e LUA13 funcionem ‚Äî para outros nomes, mantemos a mensagem de n√£o encontrado.
    mensagem.textContent = `‚ö† Quarto "${quartoRaw}" n√£o encontrado.`;
    somErro.play();
  }
});
</script>

</body>
</html>

